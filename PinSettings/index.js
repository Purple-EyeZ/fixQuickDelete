(function(f,s,p,t,w,F,c,h,l,m){"use strict";const{intl:y,t:R}=p.findByProps("intl")??{},{runtimeHashMessageKey:v}=p.findByProps("runtimeHashMessageKey")??{},I=!!t.i18n.Messages.DISCORD||!y||!R||!v,u={},b=Object.freeze(new Proxy(u,{get(n,r,a){const e=r.toString();if(e in u)return Reflect.get(n,e,a);if(I)return u[e]=t.i18n.Messages[e];const i=v(e);try{return u[e]=y.string(R[i])}catch(o){return console.warn(`intlProxy: Failed to get intl message for key: ${e} (${i})`,o),u[e]=""}}})),d={};Object.freeze(new Proxy(d,{get(n,r,a){const e=r.toString();if(e in d)return Reflect.get(n,e,a);if(I)return d[e]=typeof t.i18n.Messages[e]=="string"?function(){return t.i18n.Messages[e]}:t.i18n.Messages[e].format;const i=v(e);try{return d[e]=function(o){return y.format(R[i],o)}}catch(o){return console.warn(`intlFormat: Failed to get intl format message for key: ${e} (${i})`,o),d[e]=function(){return""}}}}));const{FormRow:S}=c.Forms;function x(n){let{plugin:r,forceUpdate:a}=n;const e=l.getSettings(r.id),i=t.NavigationNative.useNavigation();return t.React.createElement(S,{label:r.manifest.name,leading:t.React.createElement(S.Icon,{source:m.getAssetIDByName(r.manifest.vendetta?.icon??"ic_application_command_24px")}),trailing:S.Arrow,onPress:function(){return r.enabled?i.push("VendettaCustomPage",{title:r.manifest.name,render:e}):a()}})}const{FormSection:N,FormDivider:M}=c.Forms;function U(){h.useProxy(s.storage);const n=Object.keys(s.storage.pinnedPlugins),r=window.hasOwnProperty("enmity")||window.hasOwnProperty("Aliucord"),[,a]=t.React.useReducer(function(i){return~i},0);if(n.length===0)return null;const e=n.filter(function(i){return l.plugins[i]&&l.plugins[i].enabled}).map(function(i,o){return t.React.createElement(t.React.Fragment,null,t.React.createElement(x,{plugin:l.plugins[i],forceUpdate:a}),o!==n.length-1&&t.React.createElement(M,null))});return s.storage.appendExisting?t.React.createElement(c.ErrorBoundary,null,e):t.React.createElement(c.ErrorBoundary,null,t.React.createElement(N,{key:"PinSettingsPlugins",title:`${r?"Vendetta ":""}Plugins`},e))}const $=p.findByName("UserSettingsOverviewWrapper",!1);function B(){if(!$)return console.error("[PinSettings] Failed to find UserSettingsOverviewWrapper"),function(){};const n=[],r=w.after("default",$,function(a,e){const i=F.findInReactTree(e.props.children,function(o){return o.type?.name==="UserSettingsOverview"});if(!i){console.error("[PinSettings] Failed to find UserSettingsOverview");return}console.log("[PinSettings] Found UserSettingsOverview:",i),n.push(w.after("render",i.type.prototype,function(o,G){const g=F.findInReactTree(G.props.children,function(P){return P?.children?.[1]?.type===c.Forms.FormSection})?.children;if(!g){console.error("[PinSettings] Failed to find settings children");return}console.log("[PinSettings] Found settings children:",g);const z=[b.BILLING_SETTINGS,b.PREMIUM_SETTINGS],E=g.findIndex(function(P){return z.includes(P?.props?.label)});console.log("[PinSettings] Injecting at index:",E),g.splice(E===-1?4:E,0,React.createElement(U,null))})),r()});return function(){return n.forEach(function(a){return a()})}}const{FormRow:_,FormRadioRow:T}=c.Forms;function A(n){let{name:r,id:a}=n;const e=s.storage.pinnedPlugins[a];return React.createElement(T,{label:r,trailing:_.Arrow,selected:e,onPress:function(){e?delete s.storage.pinnedPlugins[a]:s.storage.pinnedPlugins[a]=!0}})}const{FormRow:D,FormSection:O,FormSwitchRow:j,FormDivider:C}=c.Forms;function V(){return h.useProxy(s.storage),t.React.createElement(t.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},t.React.createElement(O,{title:"Options",titleStyleType:"no_border"},t.React.createElement(j,{label:"Append to Vendetta section",subLabel:"May be incompatible with other client mods.",leading:t.React.createElement(D.Icon,{source:m.getAssetIDByName("ic_edit_24px")}),value:s.storage.appendExisting,onValueChange:function(n){s.storage.appendExisting=n}})),t.React.createElement(O,{title:"Plugins"},t.React.createElement(t.ReactNative.FlatList,{data:Object.values(l.plugins).filter(function(n){return l.getSettings(n.id)}),ItemSeparatorComponent:C,renderItem:function(n){let{item:r}=n;return t.React.createElement(A,{name:r.manifest.name,id:r.id})}})))}s.storage.pinnedPlugins??={},s.storage.appendExisting??=!1;const k=[B()],L=function(){return k.forEach(function(n){return n()})};return f.onUnload=L,f.settings=V,f})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.utils,vendetta.ui.components,vendetta.storage,vendetta.plugins,vendetta.ui.assets);
