(function(f,a,p,t,h,F,l,m,c,I){"use strict";const{intl:S,t:v}=p.findByProps("intl")??{},{runtimeHashMessageKey:P}=p.findByProps("runtimeHashMessageKey")??{},O=!!t.i18n.Messages.DISCORD||!S||!v||!P,u={},b=Object.freeze(new Proxy(u,{get(n,r,s){const e=r.toString();if(e in u)return Reflect.get(n,e,s);if(O)return u[e]=t.i18n.Messages[e];const i=P(e);try{return u[e]=S.string(v[i])}catch(o){return console.warn(`intlProxy: Failed to get intl message for key: ${e} (${i})`,o),u[e]=""}}})),g={};Object.freeze(new Proxy(g,{get(n,r,s){const e=r.toString();if(e in g)return Reflect.get(n,e,s);if(O)return g[e]=typeof t.i18n.Messages[e]=="string"?function(){return t.i18n.Messages[e]}:t.i18n.Messages[e].format;const i=P(e);try{return g[e]=function(o){return S.format(v[i],o)}}catch(o){return console.warn(`intlFormat: Failed to get intl format message for key: ${e} (${i})`,o),g[e]=function(){return""}}}}));const{FormRow:y}=l.Forms;function M(n){let{plugin:r,forceUpdate:s}=n;const e=c.getSettings(r.id),i=t.NavigationNative.useNavigation();return t.React.createElement(y,{label:r.manifest.name,leading:t.React.createElement(y.Icon,{source:I.getAssetIDByName(r.manifest.vendetta?.icon??"ic_application_command_24px")}),trailing:y.Arrow,onPress:function(){return r.enabled?i.push("VendettaCustomPage",{title:r.manifest.name,render:e}):s()}})}const{FormSection:N,FormDivider:B}=l.Forms;function _(){m.useProxy(a.storage);const n=Object.keys(a.storage.pinnedPlugins),r=window.hasOwnProperty("enmity")||window.hasOwnProperty("Aliucord"),[,s]=t.React.useReducer(function(i){return~i},0);if(n.length===0)return null;const e=n.filter(function(i){return c.plugins[i]&&c.plugins[i].enabled}).map(function(i,o){return t.React.createElement(t.React.Fragment,null,t.React.createElement(M,{plugin:c.plugins[i],forceUpdate:s}),o!==n.length-1&&t.React.createElement(B,null))});return a.storage.appendExisting?t.React.createElement(l.ErrorBoundary,null,e):t.React.createElement(l.ErrorBoundary,null,t.React.createElement(N,{key:"PinSettingsPlugins",title:`${r?"Vendetta ":""}Plugins`},e))}const R=p.findByName("UserSettingsOverviewWrapper",!1);console.log("[PinSettings] Found settingsModule:",R);function j(){if(!R)return console.error("[PinSettings] Failed to find UserSettingsOverviewWrapper"),function(){};const n=[];console.log("[PinSettings] Patching UserSettingsOverviewWrapper...");const r=h.after("default",R,function(s,e){console.log("[PinSettings] Inside after hook for UserSettingsOverviewWrapper, result:",e);const i=F.findInReactTree(e.props.children,function(o){return o.type?.name==="UserSettingsOverview"});if(!i){console.error("[PinSettings] Failed to find UserSettingsOverview");return}console.log("[PinSettings] Found UserSettingsOverview:",i),n.push(h.after("render",i.type.prototype,function(o,$){console.log("[PinSettings] Inside render hook for UserSettingsOverview, result:",$);const d=F.findInReactTree($.props.children,function(E){return E?.children?.[1]?.type===l.Forms.FormSection})?.children;if(!d){console.error("[PinSettings] Failed to find settings children");return}console.log("[PinSettings] Found settings children:",d);const x=[b.BILLING_SETTINGS,b.PREMIUM_SETTINGS];console.log("[PinSettings] Settings titles for injection:",x);const w=d.findIndex(function(E){return x.includes(E?.props?.label)});console.log("[PinSettings] Injecting at index:",w),d.splice(w===-1?4:w,0,React.createElement(_,null)),console.log("[PinSettings] SettingsSection successfully injected.")})),console.log("[PinSettings] Unpatching UserSettingsOverviewWrapper..."),r()});return function(){console.log("[PinSettings] Cleaning up patches..."),n.forEach(function(s){return s()})}}const{FormRow:T,FormRadioRow:k}=l.Forms;function A(n){let{name:r,id:s}=n;const e=a.storage.pinnedPlugins[s];return React.createElement(k,{label:r,trailing:T.Arrow,selected:e,onPress:function(){e?delete a.storage.pinnedPlugins[s]:a.storage.pinnedPlugins[s]=!0}})}const{FormRow:C,FormSection:U,FormSwitchRow:D,FormDivider:V}=l.Forms;function W(){return m.useProxy(a.storage),t.React.createElement(t.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},t.React.createElement(U,{title:"Options",titleStyleType:"no_border"},t.React.createElement(D,{label:"Append to Vendetta section",subLabel:"May be incompatible with other client mods.",leading:t.React.createElement(C.Icon,{source:I.getAssetIDByName("ic_edit_24px")}),value:a.storage.appendExisting,onValueChange:function(n){a.storage.appendExisting=n}})),t.React.createElement(U,{title:"Plugins"},t.React.createElement(t.ReactNative.FlatList,{data:Object.values(c.plugins).filter(function(n){return c.getSettings(n.id)}),ItemSeparatorComponent:V,renderItem:function(n){let{item:r}=n;return t.React.createElement(A,{name:r.manifest.name,id:r.id})}})))}a.storage.pinnedPlugins??={},a.storage.appendExisting??=!1;const L=[j()],G=function(){return L.forEach(function(n){return n()})};return f.onUnload=G,f.settings=W,f})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.utils,vendetta.ui.components,vendetta.storage,vendetta.plugins,vendetta.ui.assets);
