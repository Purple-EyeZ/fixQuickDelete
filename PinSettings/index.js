(function(f,s,p,t,F,h,l,m,c,I){"use strict";const{intl:y,t:R}=p.findByProps("intl")??{},{runtimeHashMessageKey:S}=p.findByProps("runtimeHashMessageKey")??{},$=!!t.i18n.Messages.DISCORD||!y||!R||!S,d={},b=Object.freeze(new Proxy(d,{get(n,r,a){const e=r.toString();if(e in d)return Reflect.get(n,e,a);if($)return d[e]=t.i18n.Messages[e];const i=S(e);try{return d[e]=y.string(R[i])}catch(o){return console.warn(`intlProxy: Failed to get intl message for key: ${e} (${i})`,o),d[e]=""}}})),g={};Object.freeze(new Proxy(g,{get(n,r,a){const e=r.toString();if(e in g)return Reflect.get(n,e,a);if($)return g[e]=typeof t.i18n.Messages[e]=="string"?function(){return t.i18n.Messages[e]}:t.i18n.Messages[e].format;const i=S(e);try{return g[e]=function(o){return y.format(R[i],o)}}catch(o){return console.warn(`intlFormat: Failed to get intl format message for key: ${e} (${i})`,o),g[e]=function(){return""}}}}));const{FormRow:v}=l.Forms;function N(n){let{plugin:r,forceUpdate:a}=n;const e=c.getSettings(r.id),i=t.NavigationNative.useNavigation();return t.React.createElement(v,{label:r.manifest.name,leading:t.React.createElement(v.Icon,{source:I.getAssetIDByName(r.manifest.vendetta?.icon??"ic_application_command_24px")}),trailing:v.Arrow,onPress:function(){return r.enabled?i.push("VendettaCustomPage",{title:r.manifest.name,render:e}):a()}})}const{FormSection:U,FormDivider:M}=l.Forms;function B(){m.useProxy(s.storage);const n=Object.keys(s.storage.pinnedPlugins),r=window.hasOwnProperty("enmity")||window.hasOwnProperty("Aliucord"),[,a]=t.React.useReducer(function(i){return~i},0);if(n.length===0)return null;const e=n.filter(function(i){return c.plugins[i]&&c.plugins[i].enabled}).map(function(i,o){return t.React.createElement(t.React.Fragment,null,t.React.createElement(N,{plugin:c.plugins[i],forceUpdate:a}),o!==n.length-1&&t.React.createElement(M,null))});return s.storage.appendExisting?t.React.createElement(l.ErrorBoundary,null,e):t.React.createElement(l.ErrorBoundary,null,t.React.createElement(U,{key:"PinSettingsPlugins",title:`${r?"Vendetta ":""}Plugins`},e))}const P=p.findByName("UserSettingsOverviewWrapper",!1);console.log("[PinSettings] UserSettingsOverviewWrapper:",P);function _(){if(!P)return console.error("[PinSettings] Failed to find UserSettingsOverviewWrapper"),function(){};const n=new Array,r=F.after("default",P,function(a,e){const i=h.findInReactTree(e.props.children,function(o){return o.type&&o.type.name==="UserSettingsOverview"});if(!i){console.error("[PinSettings] Failed to find UserSettingsOverview");return}console.log("[PinSettings] Found UserSettingsOverview:",i),n.push(F.after("render",i.type.prototype,function(o,W){let{props:{children:u}}=W;const x=[b.BILLING_SETTINGS,b.PREMIUM_SETTINGS];if(console.log("[PinSettings] Settings titles for injection:",x),u=h.findInReactTree(u,function(w){return w.children[1].type===l.Forms.FormSection})?.children,!u){console.error("[PinSettings] Failed to find settings children");return}console.log("[PinSettings] Found settings children:",u);const E=u.findIndex(function(w){return x.includes(w?.props.label)});console.log("[PinSettings] Injecting at index:",E),u.splice(E===-1?4:E,0,React.createElement(B,null))})),r()});return function(){return n.forEach(function(a){return a()})}}const{FormRow:A,FormRadioRow:T}=l.Forms;function j(n){let{name:r,id:a}=n;const e=s.storage.pinnedPlugins[a];return React.createElement(T,{label:r,trailing:A.Arrow,selected:e,onPress:function(){e?delete s.storage.pinnedPlugins[a]:s.storage.pinnedPlugins[a]=!0}})}const{FormRow:D,FormSection:O,FormSwitchRow:C,FormDivider:V}=l.Forms;function k(){return m.useProxy(s.storage),t.React.createElement(t.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},t.React.createElement(O,{title:"Options",titleStyleType:"no_border"},t.React.createElement(C,{label:"Append to Vendetta section",subLabel:"May be incompatible with other client mods.",leading:t.React.createElement(D.Icon,{source:I.getAssetIDByName("ic_edit_24px")}),value:s.storage.appendExisting,onValueChange:function(n){s.storage.appendExisting=n}})),t.React.createElement(O,{title:"Plugins"},t.React.createElement(t.ReactNative.FlatList,{data:Object.values(c.plugins).filter(function(n){return c.getSettings(n.id)}),ItemSeparatorComponent:V,renderItem:function(n){let{item:r}=n;return t.React.createElement(j,{name:r.manifest.name,id:r.id})}})))}s.storage.pinnedPlugins??={},s.storage.appendExisting??=!1;const L=[_()],G=function(){return L.forEach(function(n){return n()})};return f.onUnload=G,f.settings=k,f})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.utils,vendetta.ui.components,vendetta.storage,vendetta.plugins,vendetta.ui.assets);
